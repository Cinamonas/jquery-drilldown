/**
 * A simple jQuery plugin for creating animated drilldown menus.
 *
 * @name jQuery Drilldown
 * @version 0.1.4
 * @requires jQuery v1.7+
 * @author Aleksandras Nelkinas
 * @license [MIT]{@link http://opensource.org/licenses/mit-license.php}
 *
 * Copyright (c) 2013 Aleksandras Nelkinas
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";function s(s,e){this._name=n,this._defaults=i,this.element=s,this.$element=t(s),this.options=t.extend({},i,e),this.init()}var i,n="drilldown";i={event:"click",selector:"a",speed:100,cssClass:{container:n+"-container",root:n+"-root",sub:n+"-sub",back:n+"-back"}},s.prototype={init:function(){var s=this;this.history=[],this.css={"float":"left",width:null},this.$container=this.$element.find("."+this.options.cssClass.container),this.$element.on(this.options.event,this.options.selector,function(i){s.handleAction.call(s,i,t(this))})},handleAction:function(t,s){var i=s.nextAll("."+this.options.cssClass.sub),n=!0;i.length?this.down(i):s.closest("."+this.options.cssClass.back).length?this.up():n=!1,n&&"A"===s.prop("tagName")&&t.preventDefault()},down:function(t){var s=this;t.length&&(this.css.width=this.$element.outerWidth(),this.$container.width(2*this.css.width),t=t.clone(!0).removeClass(this.options.cssClass.sub).addClass(this.options.cssClass.root),this.$container.append(t),this.animateDrilling(-1*this.css.width,function(){var i=t.prev();s.history.push(i.detach()),s.restoreState.call(s,t)}))},up:function(){var t=this,s=this.history.pop();this.css.width=this.$element.outerWidth(),this.$container.width(2*this.css.width),this.$container.prepend(s),this.animateDrilling(0,function(){var i=s.next();i.remove(),t.restoreState.call(t,s)})},animateDrilling:function(t,s){var i=this.$container.children("."+this.options.cssClass.root);i.css(this.css),i.first().animate({"margin-left":t},this.options.speed,s)},restoreState:function(t){t.css({"float":"",width:""}),this.$container.width("auto")}},t.fn[n]=function(i){return this.each(function(){t.data(this,n)||t.data(this,n,new s(this,i))})}});
