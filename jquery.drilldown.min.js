;(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function f(b,c){this._name=d;this._defaults=e;this.element=b;this.$element=a(b);this.options=a.extend({},e,c);this.init()}var d="drilldown",e;e={event:"click",selector:"a",speed:100,cssClass:{container:d+"-container",root:d+"-root",sub:d+"-sub",back:d+"-back"}};f.prototype={history:[],css:{"float":"left",width:null},init:function(){var b=this;this.$container=this.$element.find("."+this.options.cssClass.container);
this.$element.on(this.options.event,this.options.selector,function(c){b.handleAction.call(b,c,a(this))})},handleAction:function(b,c){var g=c.nextAll("."+this.options.cssClass.sub),a=!0;g.length?this.down(g):c.closest("."+this.options.cssClass.back).length?this.up():a=!1;a&&"A"===c.prop("tagName")&&b.preventDefault()},down:function(b){var c=this,a;b.length&&(this.css.width=this.$element.outerWidth(),this.$container.width(2*this.css.width),a=this.$container.find("."+this.options.cssClass.root).first(),
b=a.clone().html(b.html()),this.$container.append(b),this.animateDrilling(-1*this.css.width,function(){var a=b.prev();c.history.push(a);c.restoreState.call(c,a,b)}))},up:function(){var b=this,c=this.history.pop();this.css.width=this.$element.outerWidth();this.$container.width(2*this.css.width);this.$container.prepend(c);this.animateDrilling(0,function(){var a=c.next();b.restoreState.call(b,a,c)})},animateDrilling:function(b,a){var d=this.$container.children("."+this.options.cssClass.root);d.css(this.css);
d.first().animate({"margin-left":b},this.options.speed,a)},restoreState:function(b,a){a.css({"float":"none",width:"auto"});b.remove();this.$container.width("auto")}};a.fn[d]=function(b){return this.each(function(){a.data(this,d)||a.data(this,d,new f(this,b))})}});
