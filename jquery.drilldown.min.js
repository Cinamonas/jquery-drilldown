;(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function(b,g){function f(a,c){this._name=d;this._defaults=e;this.element=a;this.$element=b(a);this.options=b.extend({},e,c);this.init()}var d="drilldown",e;e={event:"click",selector:"a",speed:100,cssClass:{container:d+"-container",root:d+"-root",sub:d+"-sub",back:d+"-back"}};f.prototype={init:function(){var a=this;this.history=[];this.css={"float":"left",width:null};this.$container=this.$element.find("."+this.options.cssClass.container);
this.$element.on(this.options.event,this.options.selector,function(c){a.handleAction.call(a,c,b(this))})},handleAction:function(a,c){var b=c.nextAll("."+this.options.cssClass.sub),d=!0;b.length?this.down(b):c.closest("."+this.options.cssClass.back).length?this.up():d=!1;d&&"A"===c.prop("tagName")&&a.preventDefault()},down:function(a){var c=this;a.length&&(this.css.width=this.$element.outerWidth(),this.$container.width(2*this.css.width),a=a.clone(!0).removeClass(this.options.cssClass.sub).addClass(this.options.cssClass.root),
this.$container.append(a),this.animateDrilling(-1*this.css.width,function(){var b=a.prev();c.history.push(b.detach());c.restoreState.call(c,a)}))},up:function(){var a=this,c=this.history.pop();this.css.width=this.$element.outerWidth();this.$container.width(2*this.css.width);this.$container.prepend(c);this.animateDrilling(0,function(){c.next().remove();a.restoreState.call(a,c)})},animateDrilling:function(a,c){var b=this.$container.children("."+this.options.cssClass.root);b.css(this.css);b.first().animate({"margin-left":a},
this.options.speed,c)},restoreState:function(a){a.css({"float":"",width:""});this.$container.width("auto")}};b.fn[d]=function(a){return this.each(function(){b.data(this,d)||b.data(this,d,new f(this,a))})}});
